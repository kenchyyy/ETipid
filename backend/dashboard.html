<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Tipid Dashboard</title>
    <!-- Bootstrap CDN-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- PopperJS lib-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- External JS Script-->
    <script src="./dashboard_script.js"></script>
    <!-- ChartJS Library-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.1.1/chart.min.js"></script>
    <!-- FontAwesome CDN-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  </head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark ">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <!-- please make sure to either make a div
            or a specific height in rem for the img-->
            <img class="img-fluid" src="" alt="Etipidlogo">
        </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <!-- Anchor and link landing page-->
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <!-- Anchor and link landing page-->
                <a class="nav-link active" aria-current="page" href="#">Spend List</a>
              </li>
              <li class="nav-item">
                <!-- Don't remove this is just for demo-->
                <a class="nav-link disabled" href="#">Pricing</a>
                </li>
              
            </ul>
          </div>
        </div>
      </nav>
      <div class="container-fluid my-3">
        <div class="row justify-content-center row-cols-sm-1 ">
            <!-- left side the days-->
         
            <div class="col-sm-2"> 
              <h6 class="display-6 tt"  data-bs-placement="right" title="Show per week allocation"> Weeks Active</h6>
             <form id="days-act-inact">
                <div class="form-check form-switch">
                    <label for="monday-tog" class="form-check-label">Monday</label>
                    <input type="checkbox" id="monday-tog" class="form-check-input">
                </div>
                
                <div class="form-check form-switch">
                    <label for="tuesday-tog" class="form-check-label">Tuesday</label>
                    <input type="checkbox" id="tuesday-tog" class="form-check-input">
                </div>
                <div class="form-check form-switch">
                    <label for="wednesday-tog" class="form-check-label">Wednesday</label>
                    <input type="checkbox" id="wednesday-tog" class="form-check-input">
                </div>
                <div class="form-check form-switch">
                    <label for="thursday-tog" class="form-check-label">Thursday</label>
                    <input type="checkbox" id="thursday-tog" class="form-check-input">
                </div>
                <div class="form-check form-switch">
                    <label for="friday-tog" class="form-check-label">Friday</label>
                    <input type="checkbox" id="friday-tog" class="form-check-input">
                </div>
                <div class="form-check form-switch">
                    <label for="saturday-tog" class="form-check-label">Saturday</label>
                    <input type="checkbox" id="saturday-tog" class="form-check-input">
                </div>
                <div class="form-check form-switch">
                    <label for="sunday-tog" class="form-check-label">Sunday</label>
                    <input type="checkbox" id="sunday-tog" class="form-check-input">
                </div>
             </form>
             <div class="row justify-content-end my-5 row-cols-lg-1 gy-3">
              <form id= 'goals_form'>
                <div class="form-floating mb-3 ">
                  <input type="number" class="form-control " id="goals_num" placeholder="My Goal" value = 0 >
                  <label for="goals_num">My Goal</label>
                </div>
                <button type="button" class="btn btn-primary" data-toggle="modal" id="#savingsProgress"
                  onclick="openModal()">
                  Savings progress
                </button>
                <div class="modal fade" tabindex="-1" role="dialog" id="savingsProgress">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
            
                      <div class="modal-body">
                        <p>You have ... weeks left to get to your goal of ....</p>
                        <button type="button" class="btn btn-primary" onclick="closeModal()">Close</button>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
             </div>
            </div>
           
            <!-- CENTER-->
            <!-- ChartJS Doughnut-->
            <!-- backend should try and change the variables
            in the data array down below for dyanmic state change-->
            <!--script is below for all functions (unfinished pa na)-->
            <div class="col-sm-4">
                    
                <canvas id="chartId" aria-label="chart" height="150" width="350"></canvas>
               
               
                
            </div>
            <!-- RIGHT SIDE -->
            <!--I put read only text input fields but feel free to change it to
            buttons or cuztomize it, up to you na na-->
            <div class="col-md-4">
              <h6 class='display-6 tt' data-bs-placement="right" title="Total Budget Amount"> Amount</h6>
                <div class="form-floating mb-3 ">
                    <input type="number" class="form-control " id="amt" placeholder="Amount" value = 0 >
                    <label for="amt">Amount</label>
                  </div>
                  <!-- toggle switch for radios-->
                  <input type="radio" class="btn-check tt" data-bs-placement="top" title="Show per week allocation" name="options" id="week" autocomplete="off" checked>
                  <label class="btn btn-outline-secondary" for="week">Week</label>

                  <input type="radio" class="btn-check tt" data-bs-placement="top" title="Show per day allocation" name="options" id="day" autocomplete="off">
                  <label class="btn btn-outline-secondary" for="day">Day</label>
                  <h6 class='display-6'> Output</h6>
                  <div class="form-floating mb-3 ">
                    <input type="number" class="form-control " id="emergency" placeholder="Emergency" readonly>
                    <label for="emergency">Emergency</label>
                  </div>

                  <div class="form-floating mb-3 ">
                    <input type="number" class="form-control " id="savings" placeholder="Savings" readonly>
                    <label for="savings">Savings</label>
                  </div>

                  <div class="form-floating mb-3 ">
                    <input type="number" class="form-control " id="wants" placeholder="Amount" readonly>
                    <label for="wants">Wants</label>
                  </div>

                  <div class="form-floating mb-3 ">
                    <input type="number" class="form-control " id="needs" placeholder="Amount" readonly>
                    <label for="needs">Needs</label>
                  </div>
                  <!-- The clear button for the fields-->
                  <button type="button" class="btn btn-secondary btn-sm px-3 tt" data-bs-placement="top" title="Clear the outputs" onclick="clearfield()">Clear</button>

            </div>
            </div>
        </div>
      </div>
      <!--container for the input fields-->
      <div class="container-fluid">
        <div class="row row-cols-md-4">
          <h6 class='display-6'> Input</h6>
             <!--Emergency text field-->
            <div class="col-lg-12">
                <label for="emergency_value" class="form-label">Emergency</label>
                <input type="number" class="form-control" id="emergency_value" value="10">
            </div>
             <!--Savings text field-->
            <div class="col-lg-12">
              <label for="savings_value" class="form-label">Savings</label>
              <input type="number" class="form-control" id="savings_value" value="45">
          </div>
           <!--wants text field-->
          <div class="col-lg-12">
            <label for="wants_value" class="form-label">Wants</label>
            <input type="number" class="form-control" id="wants_value" value="25">
        </div>
        <!--Needs text field-->
        <div class="col-lg-12">
          <label for="needs_value" class="form-label">Needs</label>
          <input type="number" class="form-control" id="needs_value" value="20">
      </div>
          </div>
            <!-- Update button-->
          <div class="row g-2 justify-content-center row-cols-1 my-2">
              <button id="update_but" class="btn btn-dark btn-lg btn-block tt" data-bs-placement="top" title="Update the Output values" onclick="updateChart(); Submit()">Update

              </button>
            </div>
        
      </div>


      <!-- My lovely toasts hihi-->

      <!--Must select at least one day!-->
      <div class="tost-container position-fixed bottom-0 end-0 p-3" >
        <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" id="one_act_day">
            <div class="toast-header">
              <i class="fas fa-exclamation-circle mx-1"></i>
              <strong class="me-auto">Alert!</strong>
              <button type="button" class="ml-2 mb-1" data-bs-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="toast-body">
              Must select at least one active day!
            </div>
          </div>
        </div>

        <!--Values must add up to 100-->
        <div class="tost-container position-fixed bottom-0 end-0 p-3" >
          <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" id="add_up_to">
              <div class="toast-header">
                <i class="fas fa-exclamation-circle mx-1"></i>
                <strong class="me-auto">Alert!</strong>
                <button type="button" class="ml-2 mb-1" data-bs-dismiss="toast" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="toast-body">
                Values must add up to a hundred!
              </div>
            </div>
          </div>


      <!-- internal js feel free to move to another external script-->
      <script>
        //set up block
        const data ={
          labels: ["Emergency", "Savings", "Needs", "Wants"],
               datasets: [{
                label: "online tutorial subjects",
                data: [10, 45, 25, 20],
                backgroundColor: ['purple', 'black', 'gray', 'darkgrey', ],
                hoverOffset: 5
               }],
            };

        //config block 
        const config ={
          type: 'doughnut',
            data,
            options: {
               responsive: true,
            }

        }

        // init block
        const chartId = new Chart(
          document.getElementById("chartId").getContext("2d"),
          config
        )

        //js funct

        const emergency = document.getElementById('emergency_value')
        const savings = document.getElementById('savings_value')
        const wants = document.getElementById('wants_value')
        const needs = document.getElementById('needs_value')
        const update_but = document.getElementById('update_but')

        

        function updateChart(){
          chartId.data.datasets[0].data[0] = emergency.value 
          chartId.data.datasets[0].data[1] = savings.value
          chartId.data.datasets[0].data[2] = wants.value  
          chartId.data.datasets[0].data[3] = needs.value 
          chartId.update()

        }
        
// TOOL TIP HANDLING
 const tooltips = document.querySelectorAll('.tt')
 tooltips.forEach(t => {
  new bootstrap.Tooltip(t)
 })

      </script>
</body>
</html>
